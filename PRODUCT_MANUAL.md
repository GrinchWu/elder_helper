# 老年人电脑助手 - 产品说明书

## 产品概述

**产品名称**：老年人电脑助手 Agent  
**版本**：v0.2.0  
**目标用户**：60岁以上、不熟悉电脑操作的中老年人群体  
**产品定位**：基于AI的智能电脑操作辅助系统

### 产品愿景

让每一位老年人都能轻松使用电脑，不再因为技术障碍而与数字世界隔绝。

### 核心价值

| 价值点 | 说明 |
|--------|------|
| 🗣️ 自然交流 | 支持语音输入，理解老年人的日常表述方式 |
| 👁️ 智能理解 | 自动分析屏幕内容，理解当前操作环境 |
| 📋 分步指导 | 将复杂操作拆解为简单步骤，逐步语音引导 |
| 🛡️ 安全防护 | 自动识别诈骗信息，保护用户财产安全 |

---

## 功能说明

### 1. 语音交互系统

#### 1.1 语音输入（ASR）
- **技术**：Sophnet 流式 WebSocket 语音识别
- **采样率**：16kHz（高清晰度）
- **特点**：实时识别，支持连续对话

**使用方式**：
1. 点击"开始录音"按钮
2. 对着麦克风说出您想做的事情
3. 说完后点击"停止录音"
4. 系统自动识别并处理您的请求

#### 1.2 语音输出（TTS）
- **技术**：CosyVoice 语音合成
- **音色**：温和、清晰的中文女声
- **语速**：可调节（默认0.9倍速，适合老年人）

**语音提示类型**：
- 欢迎语："您好！我是您的电脑助手，请告诉我您想做什么。"
- 步骤指引："第1步，共3步。请点击屏幕左下角的开始按钮。"
- 完成提示："操作完成！"
- 错误提示："出了点问题，让我重新帮您规划。"

---

### 2. 意图理解系统

#### 2.1 SimToM 心智理论框架

系统采用两阶段意图理解框架：

**第一阶段：视角转换**
- 系统"代入"老年用户的视角
- 理解用户的知识背景和认知特点
- 识别用户可能的模糊表述

**第二阶段：意图推理**
- 基于 BDI 模型（信念-愿望-意图）分析
- 推断用户的真实需求
- 生成标准化的操作意图

#### 2.2 老年人语言映射

系统内置老年人常用表述的映射表：

| 老年人说法 | 系统理解 |
|-----------|---------|
| "手机吃钱" | 流量超标或扣费 |
| "屏幕上有脏东西关不掉" | 悬浮窗广告 |
| "那个绿色的" | 微信 |
| "那个蓝色的" | 支付宝或QQ |
| "打字的地方" | 输入框 |
| "小红点" | 通知提醒 |
| "我家老二" | 第二个孩子（需配置） |

#### 2.3 家庭成员映射

可配置家庭成员称呼与真实姓名的对应关系：

```
配置示例：
- "老二" → "张小明"
- "闺女" → "张小红"
- "老伴" → "李秀英"
```

---

### 3. 屏幕理解系统

#### 3.1 页面状态分析

- **模型**：Qwen2.5-VL-72B-Instruct（轻量级）
- **功能**：
  - 识别当前应用名称（微信、浏览器、桌面等）
  - 判断页面状态（正常、加载中、错误、弹窗、登录页）
  - 列出可交互元素（按钮、输入框、链接等）
  - 描述元素大致位置（屏幕左下角、右上角等）

**输出示例**：
```
当前应用：微信
页面状态：聊天界面
可用元素：发送按钮（右下角）、输入框（底部）、返回按钮（左上角）
建议操作：在输入框中输入消息内容
```

#### 3.2 页面状态类型

| 状态 | 说明 | 系统响应 |
|------|------|---------|
| normal | 正常状态 | 继续执行 |
| loading | 加载中 | 等待加载完成 |
| error | 错误页面 | 提示用户并尝试恢复 |
| dialog | 弹窗 | 分析弹窗内容，决定操作 |
| login | 登录页 | 提示用户输入账号密码 |

---

### 4. 任务规划系统

#### 4.1 计划生成

系统将用户需求分解为可执行的步骤序列：

**示例：用户说"帮我打开微信"**

```
计划：
步骤1：点击屏幕左下角的开始按钮
步骤2：在搜索框中输入"微信"
步骤3：点击搜索结果中的微信图标
步骤4：等待微信启动完成
```

#### 4.2 步骤属性

每个步骤包含以下信息：

| 属性 | 说明 |
|------|------|
| description | 步骤描述（标准格式） |
| friendly_instruction | 老年人友好的语音指令 |
| visual_hint | 视觉提示（帮助用户找到目标） |
| expected_result | 预期执行结果 |
| error_recovery_hint | 错误恢复指导 |

#### 4.3 知识库支持（RAG）

系统内置操作知识库，来源于：
- 短视频平台的教程内容
- 预置的常见操作指南
- 老年人语言映射表

---

### 5. 执行与验证系统

#### 5.1 执行流程

```
┌─────────────────────────────────────────────────────────┐
│  1. 播报当前步骤（语音）                                  │
│     "请点击屏幕左下角的开始按钮"                          │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│  2. 等待用户操作（2.5秒）                                │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│  3. 截图并分析屏幕状态                                   │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│  4. 验证执行结果                                         │
│     - 检查是否达到最终目标                               │
│     - 检查当前步骤是否符合预期                           │
└─────────────────────────────────────────────────────────┘
                          ↓
              ┌──────────┴──────────┐
              ↓                     ↓
        [符合预期]              [不符合预期]
              ↓                     ↓
        继续下一步              触发重规划
```

#### 5.2 完成判定

**目标完成判定**：
- 检查目标应用是否已打开
- 检查目标状态关键词是否匹配
- 匹配率达到50%即判定为完成

**步骤完成判定**：
- 检查预期结果关键词是否出现在当前屏幕
- 匹配率达到30%即判定为完成

#### 5.3 错误恢复

- 最多支持3次重规划
- 每次重规划基于当前屏幕状态重新生成计划
- 超过重规划次数后，提示用户寻求帮助

---

### 6. 安全防护系统

#### 6.1 诈骗检测

系统自动检测以下可疑内容：
- 要求转账或汇款的信息
- 声称中奖或获得奖励的信息
- 要求提供银行卡、密码等敏感信息
- 冒充公检法、银行等机构的信息

**检测到可疑内容时**：
1. 立即语音警告用户
2. 阻止继续操作
3. 建议用户与家人确认

#### 6.2 敏感操作确认

以下操作需要用户二次确认：
- 支付和转账
- 删除文件
- 修改系统设置
- 安装软件

---

## 界面说明

### 主界面布局

```
┌─────────────────────────────────────────┐
│  老年人电脑助手                    [—][×] │
├─────────────────────────────────────────┤
│                                         │
│  状态：准备就绪                          │
│                                         │
├─────────────────────────────────────────┤
│  请输入您想做的事情：                    │
│  ┌─────────────────────────────────┐    │
│  │                                 │    │
│  └─────────────────────────────────┘    │
│                          [发送] [录音]   │
├─────────────────────────────────────────┤
│  [打开微信] [打开浏览器] [关闭弹窗]      │
└─────────────────────────────────────────┘
```

### 界面元素说明

| 元素 | 功能 |
|------|------|
| 状态栏 | 显示当前系统状态（准备就绪、规划中、执行中等） |
| 输入框 | 输入您想做的事情 |
| 发送按钮 | 提交请求 |
| 录音按钮 | 语音输入 |
| 快捷按钮 | 常用操作一键触发 |

---

## 使用指南

### 快速开始

1. **启动程序**
   ```bash
   python app_desktop.py
   ```

2. **等待初始化**
   - 系统会依次初始化各项服务
   - 初始化完成后会播放欢迎语

3. **输入需求**
   - 方式一：在输入框中打字
   - 方式二：点击录音按钮，说出您的需求

4. **按照指引操作**
   - 系统会语音播报每一步操作
   - 按照提示完成操作即可

### 常见使用场景

#### 场景1：打开应用
```
用户：帮我打开微信
系统：好的，我来帮您打开微信。
      第1步，请点击屏幕左下角的开始按钮。
      ...
      微信已经打开了！
```

#### 场景2：发送消息
```
用户：我想给老二发个信
系统：好的，我来帮您给张小明发消息。
      第1步，请点击微信图标打开微信。
      ...
```

#### 场景3：关闭弹窗
```
用户：屏幕上有个东西关不掉
系统：我看到屏幕上有一个弹窗广告。
      请点击弹窗右上角的×按钮关闭它。
```

---

## 技术规格

### 系统要求

| 项目 | 要求 |
|------|------|
| 操作系统 | Windows 10/11 |
| Python | 3.10+ |
| 内存 | 4GB+ |
| 网络 | 需要联网（调用云端API） |
| 麦克风 | 可选（语音输入需要） |
| 扬声器 | 需要（语音输出） |

### 依赖服务

| 服务 | 提供商 | 用途 |
|------|--------|------|
| LLM | Sophnet API | 意图理解、任务规划 |
| VL | Sophnet API | 屏幕分析 |
| ASR | Sophnet API | 语音识别 |
| TTS | Sophnet CosyVoice | 语音合成 |
| Embedding | BGE-M3 | 知识检索 |

### API 配置

```bash
# .env 文件配置
SOPHNET_API_KEY=your_api_key_here
LLM_MODEL=Qwen2.5-72B-Instruct
VL_MODEL_LIGHT=Qwen2.5-VL-72B-Instruct
```

---

## 常见问题

### Q1: 系统听不懂我说的话怎么办？
**A**: 尝试用更简单、更直接的方式表达。例如：
- ❌ "我想看看那个什么新闻的东西"
- ✅ "帮我打开浏览器看新闻"

### Q2: 操作步骤太快跟不上怎么办？
**A**: 系统会等待您完成操作后再继续。如果需要更多时间，可以在反馈框中告诉助手"等一下"。

### Q3: 系统判断错误怎么办？
**A**: 在反馈框中告诉助手实际情况，系统会重新规划。

### Q4: 遇到诈骗信息怎么办？
**A**: 系统会自动检测并警告。请立即停止操作，并与家人确认。

---

## 版本历史

| 版本 | 日期 | 更新内容 |
|------|------|---------|
| v0.2.0 | 2026-01 | 新增GUI界面、优化视觉架构、集成RAG知识库 |
| v0.1.0 | 2025-12 | 初始版本，基础功能实现 |

---

## 联系与支持

如有问题或建议，请联系开发团队。

---

*本产品旨在帮助老年人更好地使用电脑，让科技服务于每一个人。*
